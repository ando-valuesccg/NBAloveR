table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(Player, College, sep = " ", col = "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else {
table_1 <- tables[[1]][-1,]
table_2 <- tables[[2]][-1,]
table <- dplyr::bind_rows(table_1, table_2)
names(table) <- c("Team", "Player", "College")
}
table$Team <- stringr::str_remove(table$Team, "\\*")
return(table)
table
table
return(table)
table
tail_url <- ".html"
if (year >= 2009) {
head_url <- "http://www.nbadraft.net/nba_final_draft/"
url <-  paste0(head_url, as.character(year))
} else {
head_url <- "http://www.nbadraft.net/nba_draft_history/"
url <- paste0(head_url, as.character(year), tail_url)
}
tables <- xml2::read_html(url) %>%
rvest::html_table()
if (year >= 2009) {
table_1 <- tables[[1]][,c(1:3,7)]
table_2 <- tables[[1]][,c(9:11,15)]
table <- dplyr::bind_rows(table_1, table_2)
} else if (year >= 2000) {
table_1 <- tables[[1]][,c(1,3:4)]
table_2 <- tables[[1]][,c(5,7:8)]
names(table_1) <- c("No.", "Team", "Player")
names(table_2) <- c("No.", "Team", "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else if (year == 1999) {
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(Player, College, sep = " ", col = "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else {
table_1 <- tables[[1]][-1,]
table_2 <- tables[[2]][-1,]
table <- dplyr::bind_rows(table_1, table_2)
names(table) <- c("Team", "Player", "College")
}
?select
check()
?"%>%"
use_package(tidyr)
library(tidyr)
use_package(tidyr)
use_package("tidyr")
check()
use_package("magrittr")
year = 2009
tail_url <- ".html"
if (year >= 2009) {
head_url <- "http://www.nbadraft.net/nba_final_draft/"
url <-  paste0(head_url, as.character(year))
} else {
head_url <- "http://www.nbadraft.net/nba_draft_history/"
url <- paste0(head_url, as.character(year), tail_url)
}
tables <- xml2::read_html(url) %>%
rvest::html_table()
if (year >= 2009) {
table_1 <- tables[[1]][,c(1:3,7)]
table_2 <- tables[[1]][,c(9:11,15)]
table <- dplyr::bind_rows(table_1, table_2)
} else if (year >= 2000) {
table_1 <- tables[[1]][,c(1,3:4)]
table_2 <- tables[[1]][,c(5,7:8)]
names(table_1) <- c("No.", "Team", "Player")
names(table_2) <- c("No.", "Team", "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else if (year == 1999) {
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(table_2$Player, table_2$College, sep = " ", col = "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else {
table_1 <- tables[[1]][-1,]
table_2 <- tables[[2]][-1,]
table <- dplyr::bind_rows(table_1, table_2)
names(table) <- c("Team", "Player", "College")
}
table$Team <- stringr::str_remove(table$Team, "\\*")
table
year = 1999
tail_url <- ".html"
if (year >= 2009) {
head_url <- "http://www.nbadraft.net/nba_final_draft/"
url <-  paste0(head_url, as.character(year))
} else {
head_url <- "http://www.nbadraft.net/nba_draft_history/"
url <- paste0(head_url, as.character(year), tail_url)
}
tables <- xml2::read_html(url) %>%
rvest::html_table()
if (year >= 2009) {
table_1 <- tables[[1]][,c(1:3,7)]
table_2 <- tables[[1]][,c(9:11,15)]
table <- dplyr::bind_rows(table_1, table_2)
} else if (year >= 2000) {
table_1 <- tables[[1]][,c(1,3:4)]
table_2 <- tables[[1]][,c(5,7:8)]
names(table_1) <- c("No.", "Team", "Player")
names(table_2) <- c("No.", "Team", "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else if (year == 1999) {
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(table_2$Player, table_2$College, sep = " ", col = "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else {
table_1 <- tables[[1]][-1,]
table_2 <- tables[[2]][-1,]
table <- dplyr::bind_rows(table_1, table_2)
names(table) <- c("Team", "Player", "College")
}
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(table_2$Player, table_2$College, sep = " ", col = "Player")
names(table_2) <- c("Team", "Player", "College")
table_2
table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
year = 2006
tail_url <- ".html"
if (year >= 2009) {
head_url <- "http://www.nbadraft.net/nba_final_draft/"
url <-  paste0(head_url, as.character(year))
} else {
head_url <- "http://www.nbadraft.net/nba_draft_history/"
url <- paste0(head_url, as.character(year), tail_url)
}
tables <- xml2::read_html(url) %>%
rvest::html_table()
if (year >= 2009) {
table_1 <- tables[[1]][,c(1:3,7)]
table_2 <- tables[[1]][,c(9:11,15)]
table <- dplyr::bind_rows(table_1, table_2)
} else if (year >= 2000) {
table_1 <- tables[[1]][,c(1,3:4)]
table_2 <- tables[[1]][,c(5,7:8)]
names(table_1) <- c("No.", "Team", "Player")
names(table_2) <- c("No.", "Team", "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else if (year == 1999) {
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(table_2$Player, table_2$College, sep = " ", col = "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else {
table_1 <- tables[[1]][-1,]
table_2 <- tables[[2]][-1,]
table <- dplyr::bind_rows(table_1, table_2)
names(table) <- c("Team", "Player", "College")
}
table$Team <- stringr::str_remove(table$Team, "\\*")
table
year = 1999
url <-  paste0(head_url, as.character(year))
if (year >= 2009) {
head_url <- "http://www.nbadraft.net/nba_final_draft/"
url <-  paste0(head_url, as.character(year))
} else {
head_url <- "http://www.nbadraft.net/nba_draft_history/"
url <- paste0(head_url, as.character(year), tail_url)
}
tables <- xml2::read_html(url) %>%
rvest::html_table()
if (year >= 2009) {
table_1 <- tables[[1]][,c(1:3,7)]
table_2 <- tables[[1]][,c(9:11,15)]
table <- dplyr::bind_rows(table_1, table_2)
} else if (year >= 2000) {
table_1 <- tables[[1]][,c(1,3:4)]
table_2 <- tables[[1]][,c(5,7:8)]
names(table_1) <- c("No.", "Team", "Player")
names(table_2) <- c("No.", "Team", "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else if (year == 1999) {
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(table_2$Player, table_2$College, sep = " ", col = "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else {
table_1 <- tables[[1]][-1,]
table_2 <- tables[[2]][-1,]
table <- dplyr::bind_rows(table_1, table_2)
names(table) <- c("Team", "Player", "College")
}
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(table_2$Player, table_2$College, sep = " ", col = "Player")
table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 %>% head()
table_2 magrittr::"%>%" head()
document()
check()
?globalVariables
statsCompare <- function(player_list = c(), Age=FALSE ) {
player_key_list = list()
plyaer_career = list()
head_url = "https://www.basketball-reference.com/players/"
tail_url = "01.html"
for (i in 1:length(player_list)){
player_key_list[i] <- paste0(substr(strsplit(player_list[i], " ")[[1]][2], 0,1), "/",
substr(strsplit(player_list[i], " ")[[1]][2], 1,5),
substr(player_list[i], 1,2)) %>%
stringr::str_to_lower()
}
for (i in 1:length(player_key_list)){
plyaer_career[i] <- paste0(head_url, player_key_list[[i]][1], tail_url) %>%
xml2::read_html() %>%
rvest::html_table()
plyaer_career[[i]] = plyaer_career[[i]][plyaer_career[[i]]$Age != "NA", ]
}
for (i in 1:length(plyaer_career)){
plyaer_career[[i]]$Player = player_list[i]
}
point_plot_syn = list()
line_plot_syn = list()
if (Age==FALSE) {
for ( i in 1:length(plyaer_career)){
point_plot_syn[[i]] <-
ggplot2::geom_point(data = plyaer_career[[i]],
ggplot2::aes_string(x="Season", y="PTS", color="Player"))
line_plot_syn[[i]] <-
ggplot2::geom_line(data = plyaer_career[[i]],
ggplot2::aes_string(x="Season", y="PTS", group="Player", color="Player"))
}
} else {
for ( i in 1:length(plyaer_career)){
point_plot_syn[[i]] <-
ggplot2::geom_point(data = plyaer_career[[i]],
ggplot2::aes_string(x="Age", y="PTS", color="Player"))
line_plot_syn[[i]] <-
ggplot2::geom_line(data = plyaer_career[[i]],
ggplot2::aes_string(x="Age", y="PTS", group="Player", color="Player"))
}
}
ggplot2::ggplot() +
point_plot_syn +
line_plot_syn +
ggplot2::theme(axis.text.x = ggplot2::element_text(angle = 40)) +
ggplot2::labs(title = "Career PPG Comparison")
}
statsCompare(c("Kevin Durant", "Russel Westbrook", "James Harden"), Age=FALSE)
Team = "bos"
year = 2008
base_url <- "https://www.basketball-reference.com/teams/"
url <- paste0(base_url, stringr::str_to_upper(Team), "/", year, "_games.html")
tables <- xml2::read_html(url) %>%
rvest::html_table()
df <- data.frame(tables[[1]]) %>%
dplyr::filter(Date != "Date")
names(df)  <- c("G", "Date", "StartTime", "Var.4", "Var.5", "Var.6", "Opponent", "Result", "OT", "Tm", "Opp", "W", "L", "Streak", "Notes")
df[, c(1:3, 7:14)]
df <- data.frame(tables[[1]]) %>%
dplyr::filter(data.frame(tables[[1]])$Date != "Date")
seasonSchedule <- function (Team, year) {
base_url <- "https://www.basketball-reference.com/teams/"
url <- paste0(base_url, stringr::str_to_upper(Team), "/", year, "_games.html")
tables <- xml2::read_html(url) %>%
rvest::html_table()
df <- data.frame(tables[[1]]) %>%
dplyr::filter(data.frame(tables[[1]])$Date != "Date")
names(df)  <- c("G", "Date", "StartTime", "Var.4", "Var.5", "Var.6", "Opponent", "Result", "OT", "Tm", "Opp", "W", "L", "Streak", "Notes")
df[, c(1:3, 7:14)]
}
bos08 <- seasonSchedule(Team = "bos", year = 2008)
head(bos08)
Name = "Kobe Bryant"
head_url = "https://www.basketball-reference.com/players/"
tail_url = "01.html"
player_key <- paste0(substr(strsplit(Name, " ")[[1]][2], 0,1), "/",
substr(strsplit(Name, " ")[[1]][2], 1,5),
substr(Name, 1,2)) %>%
stringr::str_to_lower()
tables <- paste0(head_url, player_key, tail_url) %>%
xml2::read_html() %>%
rvest::html_table()
tables[[1]] %>%
dplyr::filter(Season=="Career")
tables[[1]] %>%
dplyr::filter(tables[[1]]$Season=="Career")
year = 2006
conf = "ALL"
head_url <- "https://www.basketball-reference.com/friv/standings.fcgi?month=5&day=10&year="
tail_url <- "&lg_id=NBA"
url <- paste0(head_url, as.character(year), tail_url)
tables <- xml2::read_html(url) %>%
rvest::html_table()
conference <- stringr::str_to_lower(conf)
getStandings <- function (year, conf = c("East", "West", "All")) {
head_url <- "https://www.basketball-reference.com/friv/standings.fcgi?month=5&day=10&year="
tail_url <- "&lg_id=NBA"
url <- paste0(head_url, as.character(year), tail_url)
tables <- xml2::read_html(url) %>%
rvest::html_table()
conference <- stringr::str_to_lower(conf)
if (conference == "east") {
table <- tables[[1]] %>%
plyr::arrange(plyr::desc(tables[[1]]$W)) %>%
stats::na.omit()
} else if (conference == "west") {
table <- tables[[2]] %>%
plyr::arrange(plyr::desc(tables[[2]]$W)) %>%
stats::na.omit()
} else {
names(tables[[1]])[1] <- "Team"
names(tables[[2]])[1] <- "Team"
table <- dplyr::bind_rows(tables[[1]], tables[[2]]) %>%
plyr::arrange(plyr::desc(dplyr::bind_rows(tables[[1]], tables[[2]])$W)) %>%
stats::na.omit()
}
table$Team = stringr::str_remove(table$Team, "\\*")
names(table) <- c("Team", "W", "L", "Per", "GB", "PW", "PL", "PSG", "PAG")
data.frame(table)
}
Standings06 <- getStandings(year = 2006, conf = "ALL")
head(Standings06)
table_1
table_1 <- table_1 %>%
tidyr::separate(table_1$Team, sep = "\n", into = c("No.", "Team"))
year = 1999
tail_url <- ".html"
if (year >= 2009) {
head_url <- "http://www.nbadraft.net/nba_final_draft/"
url <-  paste0(head_url, as.character(year))
} else {
head_url <- "http://www.nbadraft.net/nba_draft_history/"
url <- paste0(head_url, as.character(year), tail_url)
}
tables <- xml2::read_html(url) %>%
rvest::html_table()
table_1 <- tables[[1]]
table_1
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(table_1$Team, sep = "\n", into = c("No.", "Team"))
head(table_1)
table_1[,1] %>%
head()
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- table_1 %>%
tidyr::separate(table_1[,1], sep = "\n", into = c("No.", "Team"))
table_1 <- tidyr::separate(table_1, Team, sep = "\n", into = c("No.", "Team"))
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- tidyr::separate(table_1, Team, sep = "\n", into = c("No.", "Team"))
getDraftResult <- function (year) {
tail_url <- ".html"
if (year >= 2009) {
head_url <- "http://www.nbadraft.net/nba_final_draft/"
url <-  paste0(head_url, as.character(year))
} else {
head_url <- "http://www.nbadraft.net/nba_draft_history/"
url <- paste0(head_url, as.character(year), tail_url)
}
tables <- xml2::read_html(url) %>%
rvest::html_table()
if (year >= 2009) {
table_1 <- tables[[1]][,c(1:3,7)]
table_2 <- tables[[1]][,c(9:11,15)]
table <- dplyr::bind_rows(table_1, table_2)
} else if (year >= 2000) {
table_1 <- tables[[1]][,c(1,3:4)]
table_2 <- tables[[1]][,c(5,7:8)]
names(table_1) <- c("No.", "Team", "Player")
names(table_2) <- c("No.", "Team", "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else if (year == 1999) {
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- tidyr::separate(table_1, Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team"))
table_2 %>%
tidyr::unite(table_2$Player, table_2$College, sep = " ", col = "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else {
table_1 <- tables[[1]][-1,]
table_2 <- tables[[2]][-1,]
table <- dplyr::bind_rows(table_1, table_2)
names(table) <- c("Team", "Player", "College")
}
table$Team <- stringr::str_remove(table$Team, "\\*")
table
}
draft09 <- getDraftResult(year = 1999)
getDraftResult <- function (year) {
tail_url <- ".html"
if (year >= 2009) {
head_url <- "http://www.nbadraft.net/nba_final_draft/"
url <-  paste0(head_url, as.character(year))
} else {
head_url <- "http://www.nbadraft.net/nba_draft_history/"
url <- paste0(head_url, as.character(year), tail_url)
}
tables <- xml2::read_html(url) %>%
rvest::html_table()
if (year >= 2009) {
table_1 <- tables[[1]][,c(1:3,7)]
table_2 <- tables[[1]][,c(9:11,15)]
table <- dplyr::bind_rows(table_1, table_2)
} else if (year >= 2000) {
table_1 <- tables[[1]][,c(1,3:4)]
table_2 <- tables[[1]][,c(5,7:8)]
names(table_1) <- c("No.", "Team", "Player")
names(table_2) <- c("No.", "Team", "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else if (year == 1999) {
table_1 <- tables[[1]]
names(table_1) <- c("Team", "Player")
table_1 <- table_1[-1,]
table_1 <- tidyr::separate(table_1, Team, sep = "\n", into = c("No.", "Team"))
table_2 <- tables[[2]][-1,]
names(table_2) <- c("Team", "Player", "College")
table_2 <- table_2 %>%
tidyr::separate(Team, sep = "\n", into = c("No.", "Team")) %>%
tidyr::unite(Player, College, sep = " ", col = "Player")
table <- dplyr::bind_rows(table_1, table_2)
} else {
table_1 <- tables[[1]][-1,]
table_2 <- tables[[2]][-1,]
table <- dplyr::bind_rows(table_1, table_2)
names(table) <- c("Team", "Player", "College")
}
table$Team <- stringr::str_remove(table$Team, "\\*")
table
}
draft09 <- getDraftResult(year = 1999)
head(draft09)
getwd()
document()
check()
